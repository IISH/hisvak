#if($response.facetFields)
##    <h2 #annTitle("Facets generated by adding &facet.field= to the request")>Browse in field(s):</h2>
    #foreach($field in $response.facetFields)
    ## Hide facets without value
        #if($field.values.size()>15)
        <form action="#" method="GET">
            <select class="facet-field-select" name="fq">
                <option>$resource.get($field.name):</option>
                #foreach($facet in $field.values)
                    <option value="$field.name:$facet.name">#msg($field.name $facet.name) ($facet.count)</option>
                #end
            </select>
        </form>
        #elseif ($field.values.size() == 1)
        <span class="facet-field">$resource.get($field.name):</span>
            <!--
            #set($fqList=[])
            #foreach($fq in $params.getParams('fq'))
                #set($kv=$fq.split(':', 2))
                #if ($field.name!=$kv[0])
                    $!fqList.add($fq)
                #end
            #end
            -->
        <ul>
            <li>
                #if ($fqList.size() == $params.getParams('fq').size())
                   <span class="notselected-facet-field">#msg($field.name $field.values[0].name) ($field.values[0].count)</span>
                #else
                    <a class="constraint" href="#url_for_filters($fqList)">#msg($field.name $field.values[0].name)
                        ($field.values[0].count)</a>
                #end
            </li>
        </ul>
        #elseif ($field.values.size()>1)
        <span class="facet-field">$resource.get($field.name):</span>
        <ul>
            #foreach($facet in $field.values)
                <li><a href="#url_for_facet_filter($field.name, $facet.name)">#msg($field.name $facet.name)</a>
                    ($facet.count)
                </li>
            #end
        </ul>
        #end
    #end
#end

